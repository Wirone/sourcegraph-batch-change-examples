name: string-index-to-contains
description: |
  This batch change uses [Comby](https://comby.dev) to use String.Contains to check for a substring in a string instead of using Index.

on:
  - repositoriesMatchingQuery: language:go not file:test not file:vendor not file:Godeps strings.Index(..., ...) > -1 or strings.Index(..., ...) >= 0 or strings.Index(..., ...) != -1 patternType:structural count:100

steps:
  - run: |
      comby -in-place 'strings.Index(:[a], :[b]) > -1' 'strings.Contains(:[a], :[b])' .go -matcher .go -exclude-dir .,vendor;
      comby -in-place 'strings.Index(:[a], :[b]) >= 0' 'strings.Contains(:[a], :[b])' .go -matcher .go -exclude-dir .,vendor;
      comby -in-place 'strings.Index(:[a], :[b]) != -1' 'strings.Contains(:[a], :[b])' .go -matcher .go -exclude-dir .,vendor;
    container: comby/comby
  - run: goimports -w $(find . -type f -name '*.go' -not -path "./vendor/*")
    container: unibeautify/goimports

changesetTemplate:
  title: Use String.Contains instead of Index to check for substring
  body: This batch change replaces using String.Contains instead of Index to check that a string contains a substring
  branch: go-autofix/string-index-to-contains
  commit:
    message: Use String.Contains